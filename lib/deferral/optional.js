// Generated by CoffeeScript 1.6.3
var __slice = [].slice;

module.exports = function() {
  var args, fn, opts;
  args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  opts = args[0];
  fn = args.slice(-1)[0];
  if (typeof fn !== 'function') {
    throw new Error('expected function as last arg');
  }
  return function() {
    var defers;
    defers = typeof opts["if"] === 'function' ? opts["if"]() : void 0;
    return fn();
  };
};
